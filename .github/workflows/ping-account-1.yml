name: Keep Render Services Alive - Account 1

on:
  schedule:
    # Run every 10 minutes
    - cron: "*/10 * * * *"
  workflow_dispatch: # Allow manual trigger

jobs:
  ping-services:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Services (Account 1)
        run: |
          echo "üöÄ Pinging services from Account 1..."

          services=(
            "https://api-gateway-kzo9.onrender.com/health"
            "https://auth-service-uds0.onrender.com/health"
            "https://quiz-service-6jzt.onrender.com/health"
          )

          for service in "${services[@]}"; do
            echo "Pinging: $service"
            response=$(curl -s -o /dev/null -w "%{http_code}" --max-time 30 "$service" || echo "FAILED")
            
            if [ "$response" = "200" ] || [ "$response" = "204" ]; then
              echo "‚úÖ $service - OK (HTTP $response)"
            else
              echo "‚ö†Ô∏è $service - Response: $response"
            fi
            
            sleep 2
          done

          echo "‚ú® Ping complete from Account 1!"
