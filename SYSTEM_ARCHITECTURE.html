<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cognito Learning Hub - System Architecture Documentation</title>
    <style>
        /* Print-optimized styles */
        @page {
            size: A4;
            margin: 2cm 1.5cm;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 210mm;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }

        /* Print styles */
        @media print {
            body {
                padding: 0;
                max-width: 100%;
            }
            
            h1, h2, h3, h4 {
                page-break-after: avoid;
            }
            
            pre, blockquote, table {
                page-break-inside: avoid;
            }
            
            .page-break {
                page-break-before: always;
            }
            
            a {
                color: #333;
                text-decoration: none;
            }
        }

        /* Typography */
        h1 {
            color: #2c3e50;
            font-size: 32px;
            border-bottom: 4px solid #3498db;
            padding-bottom: 10px;
            margin-top: 0;
            page-break-after: avoid;
        }

        h2 {
            color: #2c3e50;
            font-size: 26px;
            margin-top: 40px;
            margin-bottom: 15px;
            border-left: 5px solid #3498db;
            padding-left: 15px;
            page-break-after: avoid;
        }

        h3 {
            color: #34495e;
            font-size: 20px;
            margin-top: 30px;
            margin-bottom: 10px;
            page-break-after: avoid;
        }

        h4 {
            color: #34495e;
            font-size: 16px;
            margin-top: 20px;
            margin-bottom: 8px;
            font-weight: 600;
            page-break-after: avoid;
        }

        /* Content */
        p {
            margin: 10px 0;
            text-align: justify;
        }

        ul, ol {
            margin: 10px 0;
            padding-left: 30px;
        }

        li {
            margin: 5px 0;
        }

        /* Code blocks */
        pre {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            overflow-x: auto;
            font-size: 12px;
            line-height: 1.4;
            font-family: 'Courier New', monospace;
            page-break-inside: avoid;
        }

        code {
            background: #f8f9fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            page-break-inside: avoid;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }

        th {
            background-color: #3498db;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }

        /* Boxes and highlights */
        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin: 15px 0;
            page-break-inside: avoid;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            page-break-inside: avoid;
        }

        .success-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            page-break-inside: avoid;
        }

        /* Diagrams */
        .diagram {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            padding: 20px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.3;
            overflow-x: auto;
            white-space: pre;
            page-break-inside: avoid;
        }

        /* Cover page */
        .cover-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 90vh;
            text-align: center;
            page-break-after: always;
        }

        .cover-title {
            font-size: 48px;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 700;
        }

        .cover-subtitle {
            font-size: 24px;
            color: #7f8c8d;
            margin-bottom: 40px;
        }

        .cover-info {
            font-size: 16px;
            color: #95a5a6;
            margin-top: 60px;
        }

        /* Table of contents */
        .toc {
            page-break-after: always;
            margin-top: 40px;
        }

        .toc h2 {
            border-left: none;
            padding-left: 0;
        }

        .toc ul {
            list-style: none;
            padding-left: 0;
        }

        .toc li {
            margin: 8px 0;
            padding-left: 20px;
        }

        .toc li::before {
            content: "â–¸ ";
            color: #3498db;
            font-weight: bold;
            margin-right: 10px;
        }

        .toc a {
            color: #2c3e50;
            text-decoration: none;
        }

        .toc a:hover {
            color: #3498db;
        }

        /* Badges */
        .badge {
            display: inline-block;
            padding: 4px 10px;
            background: #3498db;
            color: white;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 600;
            margin: 0 5px;
        }

        .badge-success {
            background: #27ae60;
        }

        .badge-warning {
            background: #f39c12;
        }

        .badge-danger {
            background: #e74c3c;
        }

        /* Footer */
        .footer {
            margin-top: 60px;
            padding-top: 20px;
            border-top: 2px solid #dee2e6;
            text-align: center;
            color: #7f8c8d;
            font-size: 14px;
        }

        /* Emojis for print */
        .emoji {
            font-style: normal;
        }

        /* Service cards */
        .service-card {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            page-break-inside: avoid;
        }

        .service-card h4 {
            color: #3498db;
            margin-top: 0;
        }

        /* Endpoint list */
        .endpoint-list {
            background: #f8f9fa;
            border-left: 3px solid #3498db;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            page-break-inside: avoid;
        }

        .endpoint-list div {
            margin: 5px 0;
        }

        .method {
            display: inline-block;
            width: 60px;
            font-weight: bold;
        }

        .method-post { color: #27ae60; }
        .method-get { color: #3498db; }
        .method-put { color: #f39c12; }
        .method-delete { color: #e74c3c; }

        /* Responsive for screen viewing */
        @media screen and (max-width: 768px) {
            body {
                padding: 10px;
                font-size: 14px;
            }
            
            h1 { font-size: 24px; }
            h2 { font-size: 20px; }
            h3 { font-size: 18px; }
            
            .cover-title { font-size: 32px; }
            .cover-subtitle { font-size: 18px; }
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="cover-page">
        <div class="cover-title">ğŸ—ï¸ Cognito Learning Hub</div>
        <div class="cover-subtitle">System Architecture Documentation</div>
        <div>
            <span class="badge">Microservices</span>
            <span class="badge badge-success">AI-Powered</span>
            <span class="badge badge-warning">Real-Time</span>
        </div>
        <div class="cover-info">
            <p><strong>Document Version:</strong> 1.0</p>
            <p><strong>Last Updated:</strong> December 2025</p>
            <p><strong>Maintained By:</strong> Optimistic Mutant Coders Team</p>
        </div>
    </div>

    <!-- Table of Contents -->
    <div class="toc">
        <h2>ğŸ“‹ Table of Contents</h2>
        <ul>
            <li><a href="#overview">1. Overview</a></li>
            <li><a href="#architecture-design">2. Architecture Design</a></li>
            <li><a href="#microservices-details">3. Microservices Details</a></li>
            <li><a href="#data-models">4. Data Models</a></li>
            <li><a href="#communication-patterns">5. Communication Patterns</a></li>
            <li><a href="#technology-stack">6. Technology Stack</a></li>
            <li><a href="#security-architecture">7. Security Architecture</a></li>
            <li><a href="#scalability-performance">8. Scalability & Performance</a></li>
            <li><a href="#deployment-architecture">9. Deployment Architecture</a></li>
        </ul>
    </div>

    <!-- Content Start -->
    <div class="page-break"></div>

    <h1 id="overview">ğŸ¯ Overview</h1>

    <h3>System Purpose</h3>
    <p>Cognito Learning Hub is an <strong>AI-powered educational platform</strong> built with a <strong>microservices architecture</strong> that provides:</p>
    <ul>
        <li><strong>ğŸ§  AI Quiz Generation</strong> - Generate quizzes from PDFs, topics, YouTube videos</li>
        <li><strong>âš”ï¸ Real-Time Duels</strong> - 1v1 quiz battles with live scoring</li>
        <li><strong>ğŸ‘¥ Live Sessions</strong> - Multiplayer quiz sessions with host controls</li>
        <li><strong>ğŸ® Gamification</strong> - XP, levels, achievements, streaks, leaderboards</li>
        <li><strong>ğŸ¤– AI Tutor</strong> - 24/7 doubt solving with Google Gemini</li>
        <li><strong>ğŸ“¹ Video Meetings</strong> - WebRTC-based video conferencing</li>
        <li><strong>ğŸ’¬ Social Features</strong> - Friends, chat, posts, challenges</li>
    </ul>

    <h3>Design Principles</h3>
    <div class="info-box">
        <ul>
            <li><strong>Microservices Architecture</strong> - Independent, scalable services</li>
            <li><strong>Event-Driven</strong> - Redis Pub/Sub and Socket.IO for real-time</li>
            <li><strong>API Gateway Pattern</strong> - Single entry point with routing</li>
            <li><strong>Async Processing</strong> - Bull queues for heavy operations</li>
            <li><strong>Caching Strategy</strong> - Redis for performance optimization</li>
            <li><strong>Responsive Design</strong> - Mobile-first, PWA-ready frontend</li>
        </ul>
    </div>

    <div class="page-break"></div>

    <h1 id="architecture-design">ğŸ›ï¸ Architecture Design</h1>

    <h3>High-Level Architecture</h3>
    <div class="diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT LAYER                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  React Frontend (Port 5173)                                 â”‚ â”‚
â”‚  â”‚  â€¢ Vite Build Tool                                          â”‚ â”‚
â”‚  â”‚  â€¢ React Router v6                                          â”‚ â”‚
â”‚  â”‚  â€¢ Framer Motion                                            â”‚ â”‚
â”‚  â”‚  â€¢ Socket.IO Client                                         â”‚ â”‚
â”‚  â”‚  â€¢ Context API (Auth, Socket, Gamification, Avatar)        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTPS/WSS
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      API GATEWAY (Port 3000)                      â”‚
â”‚  â€¢ Request Routing & Proxying                                     â”‚
â”‚  â€¢ CORS & Security Headers                                        â”‚
â”‚  â€¢ Rate Limiting (express-rate-limit)                             â”‚
â”‚  â€¢ Authentication Middleware                                      â”‚
â”‚  â€¢ Request/Response Logging                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Auth Service â”‚      â”‚ Quiz Service â”‚     â”‚Result Serviceâ”‚
â”‚   Port 3001  â”‚      â”‚   Port 3002  â”‚     â”‚   Port 3003  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Live Service â”‚      â”‚Social Serviceâ”‚     â”‚ Gamification â”‚
â”‚   Port 3004  â”‚      â”‚   Port 3006  â”‚     â”‚   Port 3007  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Moderation  â”‚      â”‚    Meeting   â”‚     â”‚    Avatar    â”‚
â”‚   Port 3008  â”‚      â”‚   Port 3009  â”‚     â”‚   Port 3010  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚                     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         SHARED INFRASTRUCTURE            â”‚
        â”‚                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  MongoDB     â”‚   â”‚  Redis Cloud   â”‚ â”‚
        â”‚  â”‚  Atlas       â”‚   â”‚  â€¢ Caching     â”‚ â”‚
        â”‚  â”‚  â€¢ Users     â”‚   â”‚  â€¢ Sessions    â”‚ â”‚
        â”‚  â”‚  â€¢ Quizzes   â”‚   â”‚  â€¢ Pub/Sub     â”‚ â”‚
        â”‚  â”‚  â€¢ Results   â”‚   â”‚  â€¢ Bull Queues â”‚ â”‚
        â”‚  â”‚  â€¢ Social    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚  â”‚  â€¢ Live      â”‚                       â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
        â”‚                                          â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚  â”‚  External Services                  â”‚ â”‚
        â”‚  â”‚  â€¢ Google Gemini AI (Quiz Gen)     â”‚ â”‚
        â”‚  â”‚  â€¢ YouTube Data API                â”‚ â”‚
        â”‚  â”‚  â€¢ PDF Parsing (pdf-parse)         â”‚ â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

    <h3>Request Flow Diagram</h3>
    <div class="diagram">User Action â†’ Frontend â†’ API Gateway â†’ Microservice â†’ Database/Cache
                                    â†“
                              Authentication
                                    â†“
                              Rate Limiting
                                    â†“
                              Service Routing
                                    â†“
                        Response â† Microservice</div>

    <div class="page-break"></div>

    <h1 id="microservices-details">ğŸ”§ Microservices Details</h1>

    <h2>1. API Gateway Service (Port 3000)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>Single entry point for all client requests</li>
            <li>Request routing to appropriate microservices</li>
            <li>CORS management with whitelist</li>
            <li>Rate limiting per IP</li>
            <li>Authentication token validation</li>
            <li>Request/response transformation</li>
            <li>Error handling and logging</li>
        </ul>

        <h4>Key Features:</h4>
        <pre>// CORS Configuration
allowedOrigins: [
  "http://localhost:5173",  // Development
  "https://quizwise-ai.live",  // Production
  "*.vercel.app",  // Deployment platforms
]

// Rate Limits
- General: 100 req/15min
- Auth: 5 req/15min
- Heavy: 10 req/15min</pre>

        <h4>Proxying Rules:</h4>
        <div class="endpoint-list">
            <div>/api/auth/*        â†’ Auth Service (3001)</div>
            <div>/api/quizzes/*     â†’ Quiz Service (3002)</div>
            <div>/api/results/*     â†’ Result Service (3003)</div>
            <div>/api/sessions/*    â†’ Live Service (3004)</div>
            <div>/api/social/*      â†’ Social Service (3006)</div>
            <div>/api/achievements/*â†’ Gamification Service (3007)</div>
            <div>/api/reports/*     â†’ Moderation Service (3008)</div>
            <div>/api/meetings/*    â†’ Meeting Service (3009)</div>
            <div>/api/avatar/*      â†’ Avatar Service (3010)</div>
        </div>

        <h4>Technology:</h4>
        <p><span class="badge">Express.js</span> <span class="badge">http-proxy-middleware</span> <span class="badge">helmet</span> <span class="badge">compression</span></p>
    </div>

    <div class="page-break"></div>

    <h2>2. Auth Service (Port 3001)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>User registration and login</li>
            <li>JWT token generation and validation</li>
            <li>Password hashing (bcrypt)</li>
            <li>Google OAuth integration</li>
            <li>Role-based access control (RBAC)</li>
            <li>Profile management</li>
            <li>Session management</li>
        </ul>

        <h4>User Roles:</h4>
        <ul>
            <li><strong>ğŸ‘¨â€ğŸ“ Student</strong> - Take quizzes, join sessions, chat</li>
            <li><strong>ğŸ‘¨â€ğŸ« Teacher</strong> - Create quizzes, host sessions, view analytics</li>
            <li><strong>ğŸ›¡ï¸ Moderator</strong> - Review reports, moderate content</li>
            <li><strong>ğŸ‘‘ Admin</strong> - Full system access, user management</li>
        </ul>

        <h4>Endpoints:</h4>
        <div class="endpoint-list">
            <div><span class="method method-post">POST</span>   /api/auth/register        - Register new user</div>
            <div><span class="method method-post">POST</span>   /api/auth/login           - Login with credentials</div>
            <div><span class="method method-post">POST</span>   /api/auth/google          - Google OAuth login</div>
            <div><span class="method method-get">GET</span>    /api/auth/me              - Get current user</div>
            <div><span class="method method-put">PUT</span>    /api/auth/profile         - Update profile</div>
            <div><span class="method method-post">POST</span>   /api/auth/change-password - Change password</div>
            <div><span class="method method-get">GET</span>    /api/auth/users           - List users (Admin)</div>
        </div>

        <h4>Security Features:</h4>
        <div class="success-box">
            <ul>
                <li>Passwords hashed with bcrypt (10 rounds)</li>
                <li>JWT with 7-day expiration</li>
                <li>HTTP-only cookies (optional)</li>
                <li>XSS protection via input sanitization</li>
                <li>SQL injection prevention</li>
            </ul>
        </div>

        <h4>Data Model:</h4>
        <pre>User {
  _id: ObjectId
  name: String
  email: String (unique, indexed)
  password: String (hashed)
  googleId: String (optional, indexed)
  picture: String
  role: Enum['Student', 'Teacher', 'Moderator', 'Admin']
  status: Enum['online', 'offline', 'away']
  lastSeen: Date
  createdAt: Date
  updatedAt: Date
}</pre>
    </div>

    <div class="page-break"></div>

    <h2>3. Quiz Service (Port 3002)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>AI-powered quiz generation (Gemini)</li>
            <li>CRUD operations for quizzes</li>
            <li>File upload (PDF) parsing</li>
            <li>YouTube transcript extraction</li>
            <li>Manual quiz creation</li>
            <li>Quiz search and filtering</li>
            <li>Adaptive difficulty adjustment</li>
        </ul>

        <h4>Quiz Generation Methods:</h4>
        
        <h4>A. Topic-Based Generation</h4>
        <pre>POST /api/generate/topic
Body: {
  topic: "Python Programming",
  numQuestions: 10,
  difficulty: "Medium",
  useAdaptive: true
}</pre>

        <h4>B. PDF Upload Generation</h4>
        <pre>POST /api/generate/file
Content-Type: multipart/form-data
File: document.pdf (max 10MB)</pre>

        <h4>C. YouTube Video Generation</h4>
        <pre>POST /api/generate/youtube
Body: {
  videoUrl: "https://youtube.com/watch?v=...",
  numQuestions: 5
}</pre>

        <h4>AI Service Integration:</h4>
        <div class="info-box">
            <ul>
                <li><strong>Provider:</strong> Google Gemini 1.5 Flash</li>
                <li><strong>Context:</strong> Uses adaptive learning data</li>
                <li><strong>Temperature:</strong> 0.7 (balanced creativity)</li>
                <li><strong>Max Tokens:</strong> 8000</li>
                <li><strong>Fallback:</strong> Error handling with user notification</li>
            </ul>
        </div>

        <h4>Job Queue System:</h4>
        <ul>
            <li><strong>Queue:</strong> Bull (Redis-backed)</li>
            <li><strong>Workers:</strong> 2 concurrent</li>
            <li><strong>Timeout:</strong> 60 seconds</li>
            <li><strong>Retry:</strong> 3 attempts with exponential backoff</li>
            <li><strong>Priority:</strong> Teacher > Student</li>
        </ul>

        <h4>Caching Strategy:</h4>
        <pre>Cache Keys:
- quiz:{quizId}           â†’ TTL: 1 hour
- user_quizzes:{userId}   â†’ TTL: 5 minutes
- public_quizzes          â†’ TTL: 10 minutes
- adaptive_data:{userId}  â†’ TTL: 24 hours</pre>

        <h4>Data Model:</h4>
        <pre>Quiz {
  _id: ObjectId
  title: String (required)
  description: String
  createdBy: ObjectId â†’ User (indexed)
  difficulty: Enum['Easy', 'Medium', 'Hard', 'Expert']
  category: String
  tags: [String]
  isPublic: Boolean (default: true, indexed)
  timeLimit: Number (seconds, default: 30)
  passingScore: Number (percentage, default: 60)
  totalPoints: Number
  attempts: Number (indexed)
  averageScore: Number (indexed)
  questions: [{
    question: String
    type: Enum['multiple-choice', 'true-false', 'descriptive']
    options: [String]
    correct_answer: String
    explanation: String
    points: Number
    difficulty: Enum
  }]
  createdAt: Date (indexed)
  updatedAt: Date
}

Indexes:
- { createdBy: 1, createdAt: -1 }
- { isPublic: 1, difficulty: 1 }
- { category: 1, tags: 1 }
- { averageScore: -1, attempts: -1 }</pre>
    </div>

    <div class="page-break"></div>

    <h2>4. Result Service (Port 3003)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>Quiz result submission and validation</li>
            <li>Score calculation and analytics</li>
            <li>Leaderboard generation (global, quiz-specific)</li>
            <li>Performance tracking and history</li>
            <li>Category-wise analytics</li>
            <li>Time-based metrics</li>
        </ul>

        <h4>Endpoints:</h4>
        <div class="endpoint-list">
            <div><span class="method method-post">POST</span>   /api/results             - Submit quiz result</div>
            <div><span class="method method-get">GET</span>    /api/results/user/:id    - Get user's results</div>
            <div><span class="method method-get">GET</span>    /api/results/quiz/:id    - Get quiz results</div>
            <div><span class="method method-get">GET</span>    /api/leaderboards/global - Global leaderboard</div>
            <div><span class="method method-get">GET</span>    /api/leaderboards/:quizId- Quiz leaderboard</div>
            <div><span class="method method-get">GET</span>    /api/analytics/user      - User analytics</div>
            <div><span class="method method-get">GET</span>    /api/analytics/category  - Category performance</div>
        </div>

        <h4>Score Calculation Algorithm:</h4>
        <pre>Base Score = Correct Answers Ã— Points per Question

Bonuses:
+ Time Bonus (if answered quickly)
  - Under 50% time: +20%
  - Under 75% time: +10%
+ Streak Bonus (consecutive correct)
  - 3+ streak: +5%
  - 5+ streak: +10%
  - 10+ streak: +20%
+ Perfect Score Bonus: +50 points

Final Score = Base Score Ã— (1 + Bonuses)
Percentage = (Score / Total Points) Ã— 100</pre>

        <h4>Leaderboard Caching:</h4>
        <div class="info-box">
            <strong>Cache Strategy:</strong>
            <ul>
                <li>Global: Update every 5 minutes</li>
                <li>Quiz-specific: Update on new submission</li>
                <li>TTL: 5 minutes (global), 2 minutes (quiz)</li>
                <li>Top 100 users cached</li>
                <li>Real-time updates via Redis Pub/Sub</li>
            </ul>
        </div>
    </div>

    <div class="page-break"></div>

    <h2>5. Live Service (Port 3004)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>Real-time multiplayer quiz sessions</li>
            <li>Socket.IO connection management</li>
            <li>Session state management (Redis)</li>
            <li>Live leaderboards</li>
            <li>1v1 Duel battles</li>
            <li>Host controls (start, pause, skip)</li>
            <li>Participant synchronization</li>
        </ul>

        <h4>Session Types:</h4>
        <div class="info-box">
            <strong>A. Group Sessions (Kahoot-style)</strong><br>
            Host creates â†’ Players join â†’ Questions synchronized â†’ Live scoring â†’ Real-time leaderboard â†’ Results
        </div>
        <div class="info-box">
            <strong>B. 1v1 Duels</strong><br>
            Player 1 creates â†’ Player 2 accepts â†’ Same questions â†’ Real-time scoring â†’ Winner declared
        </div>

        <h4>Socket.IO Events:</h4>
        <table>
            <thead>
                <tr>
                    <th>Event Type</th>
                    <th>Event Name</th>
                    <th>Description</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td rowspan="5"><strong>Host Events</strong></td>
                    <td>create_session</td>
                    <td>Create new session</td>
                </tr>
                <tr>
                    <td>start_session</td>
                    <td>Begin quiz</td>
                </tr>
                <tr>
                    <td>next_question</td>
                    <td>Move to next question</td>
                </tr>
                <tr>
                    <td>pause_session</td>
                    <td>Pause timer</td>
                </tr>
                <tr>
                    <td>end_session</td>
                    <td>Finish and show results</td>
                </tr>
                <tr>
                    <td rowspan="3"><strong>Player Events</strong></td>
                    <td>join_session</td>
                    <td>Join with code</td>
                </tr>
                <tr>
                    <td>submit_answer</td>
                    <td>Submit answer for current question</td>
                </tr>
                <tr>
                    <td>leave_session</td>
                    <td>Exit session</td>
                </tr>
                <tr>
                    <td rowspan="5"><strong>Broadcast Events</strong></td>
                    <td>player_joined</td>
                    <td>New player notification</td>
                </tr>
                <tr>
                    <td>question_start</td>
                    <td>Question display + timer</td>
                </tr>
                <tr>
                    <td>answer_reveal</td>
                    <td>Show correct answer</td>
                </tr>
                <tr>
                    <td>leaderboard</td>
                    <td>Updated scores</td>
                </tr>
                <tr>
                    <td>session_ended</td>
                    <td>Final results</td>
                </tr>
            </tbody>
        </table>

        <h4>Performance Optimizations:</h4>
        <ul>
            <li>Redis sessions (in-memory)</li>
            <li>Periodic DB sync (30 seconds)</li>
            <li>Batch leaderboard updates</li>
            <li>Connection pooling</li>
            <li>Compression enabled</li>
        </ul>
    </div>

    <div class="page-break"></div>

    <h2>6. Gamification Service (Port 3007)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>XP and leveling system</li>
            <li>Achievement tracking</li>
            <li>Streak management</li>
            <li>Leaderboard generation</li>
            <li>Badge unlocking</li>
            <li>Progress analytics</li>
        </ul>

        <h4>XP System:</h4>
        <pre>XP Sources:
- Quiz completion: 50-200 XP (based on difficulty)
- Perfect score: +100 XP bonus
- Daily streak: +10 XP per day
- Achievement unlock: 50-500 XP
- Social interactions: 5-20 XP
- Duel victory: +150 XP

Level Formula:
XP Required = 100 Ã— level^1.5
Level 1: 100 XP
Level 2: 283 XP
Level 5: 1118 XP
Level 10: 3162 XP</pre>

        <h4>Achievement Categories:</h4>
        <ul>
            <li><strong>Quiz Master</strong> - Complete quizzes</li>
            <li><strong>Perfect Scholar</strong> - Perfect scores</li>
            <li><strong>Speed Demon</strong> - Fast completions</li>
            <li><strong>Social Butterfly</strong> - Social interactions</li>
            <li><strong>Streak King</strong> - Maintain streaks</li>
            <li><strong>Duel Champion</strong> - Win duels</li>
        </ul>

        <h4>Streak System:</h4>
        <div class="warning-box">
            <ul>
                <li>Daily login streak</li>
                <li>Quiz completion streak</li>
                <li>Cron job at midnight (UTC) checks streaks</li>
                <li>Missed day resets streak to 0</li>
                <li>Streak freeze items (future feature)</li>
            </ul>
        </div>

        <h4>Background Jobs:</h4>
        <ul>
            <li>Achievement checks (Bull queue)</li>
            <li>Stats synchronization (every 5 minutes)</li>
            <li>Streak verification (daily at 00:00 UTC)</li>
            <li>Leaderboard refresh (every 10 minutes)</li>
        </ul>
    </div>

    <div class="page-break"></div>

    <h2>7. Social Service (Port 3006)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>Friend management</li>
            <li>Chat system (1-on-1 and groups)</li>
            <li>Posts and comments</li>
            <li>Notifications</li>
            <li>Activity feed</li>
            <li>Challenge system</li>
            <li>Follow/Following</li>
        </ul>

        <h4>Chat Features:</h4>
        <ul>
            <li>Real-time messaging (Socket.IO)</li>
            <li>Message history (MongoDB)</li>
            <li>Typing indicators</li>
            <li>Read receipts</li>
            <li>File sharing (images)</li>
            <li>Emoji reactions</li>
        </ul>

        <h4>Notification Types:</h4>
        <div class="endpoint-list">
            <div>â€¢ friend_request</div>
            <div>â€¢ message_received</div>
            <div>â€¢ post_liked</div>
            <div>â€¢ post_commented</div>
            <div>â€¢ challenge_received</div>
            <div>â€¢ achievement_unlock</div>
            <div>â€¢ quiz_invitation</div>
            <div>â€¢ duel_challenge</div>
        </div>
    </div>

    <h2>8. Meeting Service (Port 3009)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>WebRTC video conferencing</li>
            <li>Peer connection management</li>
            <li>Screen sharing</li>
            <li>Audio/video controls</li>
            <li>Meeting rooms</li>
        </ul>

        <h4>WebRTC Architecture:</h4>
        <div class="diagram">Teacher (Host) â†â†’ Signaling Server (Socket.IO) â†â†’ Students
       â†“                                              â†“
   WebRTC Peer Connections (Direct P2P)</div>

        <h4>Meeting Controls:</h4>
        <ul>
            <li>Mute/Unmute microphone</li>
            <li>Enable/Disable camera</li>
            <li>Screen share toggle</li>
            <li>Kick participant (host only)</li>
            <li>End meeting (host only)</li>
        </ul>
    </div>

    <h2>9. Moderation Service (Port 3008)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>Content moderation</li>
            <li>Report handling</li>
            <li>User flagging</li>
            <li>Quiz review</li>
            <li>Moderator dashboard</li>
        </ul>

        <h4>Moderation Actions:</h4>
        <ul>
            <li>Warn user</li>
            <li>Hide content</li>
            <li>Delete content</li>
            <li>Suspend user</li>
            <li>Ban user</li>
        </ul>
    </div>

    <h2>10. Avatar Service (Port 3010)</h2>
    <div class="service-card">
        <h4>Responsibilities:</h4>
        <ul>
            <li>Avatar customization</li>
            <li>Virtual pet system</li>
            <li>Avatar expressions</li>
            <li>Cosmetic items</li>
            <li>Avatar marketplace (future)</li>
        </ul>
    </div>

    <div class="page-break"></div>

    <h1 id="data-models">ğŸ’¾ Data Models</h1>

    <h3>Database: MongoDB Atlas</h3>

    <h4>Collections:</h4>
    <table>
        <thead>
            <tr>
                <th>Collection Name</th>
                <th>Description</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>users</td><td>User accounts</td></tr>
            <tr><td>quizzes</td><td>Quiz data</td></tr>
            <tr><td>results</td><td>Quiz results</td></tr>
            <tr><td>livesessions</td><td>Live quiz sessions</td></tr>
            <tr><td>duelmatches</td><td>1v1 battles</td></tr>
            <tr><td>userstats</td><td>Gamification stats</td></tr>
            <tr><td>achievements</td><td>Achievement definitions</td></tr>
            <tr><td>posts</td><td>Social posts</td></tr>
            <tr><td>friendships</td><td>Friend connections</td></tr>
            <tr><td>chatmessages</td><td>Chat history</td></tr>
            <tr><td>notifications</td><td>User notifications</td></tr>
            <tr><td>meetings</td><td>Video meeting sessions</td></tr>
            <tr><td>reports</td><td>Moderation reports</td></tr>
        </tbody>
    </table>

    <h4>Indexing Strategy:</h4>
    <div class="info-box">
        <ul>
            <li>User: email, googleId (unique)</li>
            <li>Quiz: createdBy, isPublic, createdAt</li>
            <li>Result: user, quiz, percentage</li>
            <li>LiveSession: sessionCode (unique)</li>
            <li>All: createdAt (TTL indexes where applicable)</li>
        </ul>
    </div>

    <div class="page-break"></div>

    <h1 id="communication-patterns">ğŸ”„ Communication Patterns</h1>

    <h3>1. Synchronous (HTTP/REST)</h3>
    <div class="diagram">Frontend â†’ API Gateway â†’ Microservice â†’ Response</div>
    <p><strong>Used for:</strong> CRUD operations, authentication, data retrieval</p>

    <h3>2. Asynchronous (Message Queue)</h3>
    <div class="diagram">Service â†’ Bull Queue (Redis) â†’ Worker â†’ Processing</div>
    <p><strong>Used for:</strong> AI quiz generation, achievement checks, notifications</p>

    <h3>3. Real-Time (WebSocket)</h3>
    <div class="diagram">Client â†â†’ Socket.IO Server â†â†’ Redis Pub/Sub â†â†’ Other Instances</div>
    <p><strong>Used for:</strong> Live sessions, chat, notifications, duels</p>

    <h3>4. Event-Driven (Pub/Sub)</h3>
    <div class="diagram">Service â†’ Redis Pub â†’ Subscribers â†’ Action</div>
    <p><strong>Used for:</strong> Cross-service events, cache invalidation</p>

    <div class="page-break"></div>

    <h1 id="technology-stack">ğŸ› ï¸ Technology Stack</h1>

    <h3>Frontend</h3>
    <table>
        <tr><th>Category</th><th>Technology</th></tr>
        <tr><td>Framework</td><td>React 18.3.1</td></tr>
        <tr><td>Build Tool</td><td>Vite 5.x</td></tr>
        <tr><td>Routing</td><td>React Router v6</td></tr>
        <tr><td>State Management</td><td>Context API</td></tr>
        <tr><td>Animations</td><td>Framer Motion</td></tr>
        <tr><td>Real-Time</td><td>Socket.IO Client</td></tr>
        <tr><td>HTTP Client</td><td>Axios</td></tr>
        <tr><td>UI Styling</td><td>Custom components + Tailwind CSS</td></tr>
        <tr><td>Icons</td><td>Lucide React</td></tr>
        <tr><td>Charts</td><td>Recharts</td></tr>
        <tr><td>Forms</td><td>React Hook Form</td></tr>
    </table>

    <h3>Backend - Shared</h3>
    <table>
        <tr><th>Category</th><th>Technology</th></tr>
        <tr><td>Runtime</td><td>Node.js 20.19.4</td></tr>
        <tr><td>Framework</td><td>Express.js</td></tr>
        <tr><td>Database</td><td>MongoDB (Mongoose ODM)</td></tr>
        <tr><td>Cache</td><td>Redis (ioredis)</td></tr>
        <tr><td>Queue</td><td>Bull</td></tr>
        <tr><td>WebSocket</td><td>Socket.IO</td></tr>
        <tr><td>Authentication</td><td>JWT (jsonwebtoken)</td></tr>
        <tr><td>Validation</td><td>express-validator</td></tr>
        <tr><td>Security</td><td>helmet, cors, bcrypt</td></tr>
        <tr><td>Logging</td><td>winston</td></tr>
    </table>

    <h3>AI & External Services</h3>
    <table>
        <tr><th>Service</th><th>Technology</th></tr>
        <tr><td>AI</td><td>Google Gemini 1.5 Flash</td></tr>
        <tr><td>PDF Processing</td><td>pdf-parse</td></tr>
        <tr><td>YouTube</td><td>@distube/ytdl-core</td></tr>
        <tr><td>Video</td><td>WebRTC (simple-peer)</td></tr>
    </table>

    <div class="page-break"></div>

    <h1 id="security-architecture">ğŸ”’ Security Architecture</h1>

    <h3>Authentication & Authorization</h3>
    <div class="diagram">JWT Token Flow:
1. User logs in â†’ Auth Service validates
2. JWT generated (7-day expiry)
3. Token sent to client
4. Client includes in Authorization header
5. API Gateway validates token
6. Request forwarded to service</div>

    <h3>Role-Based Access Control (RBAC):</h3>
    <table>
        <thead>
            <tr>
                <th>Permission</th>
                <th>Student</th>
                <th>Teacher</th>
                <th>Moderator</th>
                <th>Admin</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>Create Quiz</td>
                <td>âŒ</td>
                <td>âœ…</td>
                <td>âœ…</td>
                <td>âœ…</td>
            </tr>
            <tr>
                <td>Take Quiz</td>
                <td>âœ…</td>
                <td>âœ…</td>
                <td>âœ…</td>
                <td>âœ…</td>
            </tr>
            <tr>
                <td>View Reports</td>
                <td>âŒ</td>
                <td>âŒ</td>
                <td>âœ…</td>
                <td>âœ…</td>
            </tr>
            <tr>
                <td>Manage Users</td>
                <td>âŒ</td>
                <td>âŒ</td>
                <td>âŒ</td>
                <td>âœ…</td>
            </tr>
            <tr>
                <td>Moderate Content</td>
                <td>âŒ</td>
                <td>âŒ</td>
                <td>âœ…</td>
                <td>âœ…</td>
            </tr>
        </tbody>
    </table>

    <h3>Input Sanitization</h3>
    <div class="success-box">
        <ul>
            <li>XSS prevention (sanitize-html)</li>
            <li>SQL injection prevention (parameterized queries)</li>
            <li>NoSQL injection prevention (input validation)</li>
            <li>File upload validation (mime type, size)</li>
        </ul>
    </div>

    <h3>Rate Limiting</h3>
    <table>
        <tr><th>Tier</th><th>Limit</th></tr>
        <tr><td>General API</td><td>100 req/15min</td></tr>
        <tr><td>Auth endpoints</td><td>5 req/15min</td></tr>
        <tr><td>Heavy operations</td><td>10 req/15min</td></tr>
        <tr><td>WebSocket</td><td>1000 events/min</td></tr>
    </table>

    <h3>Data Protection</h3>
    <ul>
        <li>Passwords: bcrypt (10 rounds)</li>
        <li>Sensitive data: Environment variables</li>
        <li>HTTPS only in production</li>
        <li>Helmet.js security headers</li>
        <li>CORS whitelist</li>
    </ul>

    <div class="page-break"></div>

    <h1 id="scalability-performance">âš¡ Scalability & Performance</h1>

    <h3>Horizontal Scaling</h3>
    <div class="diagram">Load Balancer
    â”‚
    â”œâ”€â”€â”€ API Gateway Instance 1
    â”œâ”€â”€â”€ API Gateway Instance 2
    â””â”€â”€â”€ API Gateway Instance 3
              â”‚
              â”œâ”€â”€â”€ Quiz Service (2 instances)
              â”œâ”€â”€â”€ Live Service (3 instances)
              â””â”€â”€â”€ Other Services (scaled as needed)</div>

    <h3>Caching Strategy</h3>
    <div class="info-box">
        <strong>Cache Layers:</strong>
        <ol>
            <li>Browser Cache (static assets)</li>
            <li>CDN (images, videos)</li>
            <li>Redis (API responses, sessions)</li>
            <li>MongoDB (with proper indexing)</li>
        </ol>
        <strong>Cache Invalidation:</strong>
        <ul>
            <li>Time-based (TTL)</li>
            <li>Event-based (on update/delete)</li>
            <li>Manual (admin action)</li>
        </ul>
    </div>

    <h3>Database Optimization</h3>
    <ul>
        <li>Compound indexes for common queries</li>
        <li>Aggregation pipelines for analytics</li>
        <li>Read replicas for scaling reads</li>
        <li>Connection pooling (min: 2, max: 10)</li>
    </ul>

    <h3>Performance Metrics</h3>
    <table>
        <tr><th>Metric</th><th>Target</th></tr>
        <tr><td>API Response Time</td><td>&lt; 200ms (avg)</td></tr>
        <tr><td>WebSocket Latency</td><td>&lt; 50ms</td></tr>
        <tr><td>Quiz Generation</td><td>&lt; 30s (async)</td></tr>
        <tr><td>Cache Hit Rate</td><td>&gt; 80%</td></tr>
    </table>

    <div class="page-break"></div>

    <h1 id="deployment-architecture">ğŸš€ Deployment Architecture</h1>

    <h3>Production Environment</h3>
    <div class="diagram">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           CDN (Vercel Edge)             â”‚
â”‚         (Static Assets, Images)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Frontend (Vercel/Netlify)          â”‚
â”‚        React + Vite Build                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    API Gateway (Render/Railway)          â”‚
â”‚           Load Balanced                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Microserviceâ”‚         â”‚ Microserviceâ”‚
â”‚  Instance 1 â”‚         â”‚  Instance 2 â”‚
â”‚ (Render)    â”‚         â”‚ (Render)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      MongoDB Atlas (Cloud)               â”‚
â”‚   Multi-Region, Auto-Scaling             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Redis Cloud (Upstash)               â”‚
â”‚   Managed, Global Replication            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</div>

    <h3>Monitoring & Logging</h3>
    <ul>
        <li><strong>APM:</strong> Application Performance Monitoring</li>
        <li><strong>Logging:</strong> Winston (centralized)</li>
        <li><strong>Errors:</strong> Error tracking service</li>
        <li><strong>Uptime:</strong> Health check endpoints</li>
        <li><strong>Metrics:</strong> Response times, throughput</li>
    </ul>

    <h3>System Metrics</h3>
    <table>
        <thead>
            <tr>
                <th>Metric</th>
                <th>Value</th>
            </tr>
        </thead>
        <tbody>
            <tr><td>Concurrent Users</td><td>10,000+</td></tr>
            <tr><td>Database Size</td><td>100GB+</td></tr>
            <tr><td>API Requests</td><td>1M+ per day</td></tr>
            <tr><td>WebSocket Connections</td><td>5,000+ concurrent</td></tr>
            <tr><td>Quiz Generation</td><td>10,000+ per day</td></tr>
        </tbody>
    </table>

    <h3>Reliability</h3>
    <div class="success-box">
        <ul>
            <li><strong>Uptime:</strong> 99.9% SLA</li>
            <li><strong>Data Backup:</strong> Daily automated</li>
            <li><strong>Disaster Recovery:</strong> 4-hour RTO</li>
            <li><strong>Failover:</strong> Automatic</li>
        </ul>
    </div>

    <h3>Future Enhancements</h3>
    <ol>
        <li><strong>Kubernetes Deployment</strong> - Container orchestration</li>
        <li><strong>Service Mesh</strong> - Istio for service-to-service communication</li>
        <li><strong>GraphQL Gateway</strong> - Unified data fetching</li>
        <li><strong>Machine Learning</strong> - Adaptive difficulty engine</li>
        <li><strong>Mobile Apps</strong> - React Native iOS/Android</li>
        <li><strong>Analytics Dashboard</strong> - Advanced insights</li>
        <li><strong>Payment Integration</strong> - Stripe for premium features</li>
        <li><strong>White-label Solution</strong> - Multi-tenant architecture</li>
    </ol>

    <h3>Maintenance & Operations</h3>
    <div class="info-box">
        <strong>Backup Strategy:</strong>
        <ul>
            <li>Database: Daily snapshots (30-day retention)</li>
            <li>Redis: Persistence (RDB + AOF)</li>
            <li>Files: S3/Cloud storage backup</li>
        </ul>
        <strong>Update Procedures:</strong>
        <ol>
            <li>Staging environment testing</li>
            <li>Canary deployment (10% traffic)</li>
            <li>Gradual rollout (monitoring)</li>
            <li>Rollback plan ready</li>
        </ol>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p><strong>Cognito Learning Hub - System Architecture Documentation</strong></p>
        <p>Version 1.0 | December 2025</p>
        <p>Maintained by Optimistic Mutant Coders Team</p>
        <p style="margin-top: 10px;">
            <span class="badge">Microservices</span>
            <span class="badge badge-success">AI-Powered</span>
            <span class="badge badge-warning">Real-Time</span>
            <span class="badge badge-danger">Production Ready</span>
        </p>
    </div>
</body>
</html>